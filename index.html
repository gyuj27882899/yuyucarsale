<!doctype html>
<html lang="zh-Hans">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>YuYu Car Sale</title>
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="brand">
        <div class="logo">Y</div>
        <div>
          <h1>YuYu Car Sale</h1>
          <p>ç²¾é€‰è½¦è¾†å±•ç¤ºï½œä»·æ ¼é€æ˜ï½œä¸€é”® LINE è”ç³»</p>
        </div>
      </div>

      <div class="topbar">
        <div class="pill">âœ¨ ç²¾é€‰è½¦å†µ</div>
        <div class="pill">ğŸ§¾ æ˜ç¡®æ ‡ä»·</div>
        <div class="pill">ğŸ’¬ LINE å¿«é€Ÿå’¨è¯¢</div>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="grid" class="grid"></section>
  </main>

  <footer class="footer">
    <div class="container">Â© YuYu Car Sale</div>
  </footer>

  <script src="./cars.js"></script>
  <script>
    const grid = document.getElementById("grid");
    const LINE_URL = window.LINE_URL || "https://line.me/R/ti/p/oocheckoo";

    function formatPrice(n, currency="LKR") {
      return new Intl.NumberFormat("en-US").format(n) + " " + currency;
    }

    function lineLink(car){
      const msg = encodeURIComponent(
        `æˆ‘æƒ³è¯¢é—®è¿™å°è½¦ï¼š${car.title}\nä»·æ ¼ï¼š${formatPrice(car.price, car.currency)}\nç¼–å·ï¼š${car.id}`
      );
      // ç”¨ line.me çš„ ë§í¬ + åƒæ•¸ text
      return `${LINE_URL}?text=${msg}`;
    }

    (window.CARS || []).forEach(car => {
      const card = document.createElement("article");
      card.className = "card";

      const tags = (car.tags || []).map(t => `<span class="tag">${t}</span>`).join("");
      const spec = (car.spec || []).map(s => `<li>${s}</li>`).join("");

      card.innerHTML = `
        <div class="media">
          <img src="${car.image}" alt="${car.title}" loading="lazy" />
          <div class="badge"><b>${car.year || ""}</b> Â· ${car.location || ""}</div>
        </div>

        <div class="body">
          <h2 class="title">${car.title}</h2>

          <div class="price">
            <div class="num">${formatPrice(car.price, car.currency)}</div>
            <div class="id">${car.id}</div>
          </div>

          <div class="meta">
            ${tags}
            ${car.mileage ? `<span class="tag">${car.mileage}</span>` : ""}
          </div>

          <ul class="spec">
            ${spec}
          </ul>
        </div>

        <div class="actions">
          <a class="btn" href="${lineLink(car)}" target="_blank" rel="noopener">ç”¨ LINE è¯¢é—®</a>
          <a class="btn secondary" href="${LINE_URL}" target="_blank" rel="noopener">åŠ  LINE</a>
        </div>
      `;

      grid.appendChild(card);
    });
  </script>
</body>
</html>
